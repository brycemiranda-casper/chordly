<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chordly - {{ result.title if result else 'Results' }}</title>
    <link rel="stylesheet" crossorigin href="{{ url_for('static', filename='css/index-gFGseHxt.css') }}">
    <style>
        body {
            margin: 0;
            background: linear-gradient( #7207e4 1%, white 100%);
            font-family: 'Inter', sans-serif;
            color: #1f2937;
        }

        /* STICKY TOP NAVIGATION */
        .top-nav {
            position: sticky;
            top: 0;
            background: rgba(242, 237, 237, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid #e5e7eb;
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
        }

        .nav-logo { font-weight: 800; color: #9333ea; text-decoration: none; font-size: 20px; }

        .controls-group { display: flex; align-items: center; gap: 20px; }

        .btn-action {
            background: #9333ea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
        }

        .btn-action:hover { background: #7e22ce; transform: translateY(-1px); }

        .speed-control { display: flex; align-items: center; gap: 10px; font-size: 13px; color: #6b7280; }

        /* MAIN CONTENT AREA */
        .content-container {
            max-width: 900px;
            margin: 40px auto;
            padding: 0 20px;
        }

        .chord-card {
            background: rgb(255, 255, 255);
            padding: 60px;
            border-radius: 24px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.04);
            border: 1px solid #f3f4f6;
        }

        .song-info { margin-bottom: 40px; border-bottom: 2px solid #702bba; padding-bottom: 20px; }
        .song-info h1 { margin: 0; font-size: 32px; color: #111827; }
        .song-info p { margin: 5px 0 0; color: #9333ea; font-weight: 600; font-size: 18px; }

        #chordSheet {
            font-family: 'JetBrains Mono', 'Courier New', monospace;
            font-size: 20px;
            line-height: 2.2;
            white-space: pre-wrap;
            color: #000000;
            overflow-x: auto;
        }

        /* SPEED SLIDER STYLING */
        input[type=range] { width: 100px; accent-color: #9333ea; }
    </style>
</head>
<body>

    <div class="top-nav">
        <a href="/" class="nav-logo">♫ Chordly</a>
        
        <div class="controls-group">
            <div class="speed-control">
                <span>Scroll Speed</span>
                <input type="range" id="scrollSpeed" min="1" max="10" value="3">
            </div>
            <button id="playBtn" class="btn-action" onclick="toggleScroll()">▶ Play</button>
            <div style="display:flex; gap:5px;">
                <button class="btn-action" style="background:#f3e8ff; color:#9333ea;" onclick="transpose(1)">+1 Key</button>
                <button class="btn-action" style="background:#f3e8ff; color:#9333ea;" onclick="transpose(-1)">-1 Key</button>
            </div>
        </div>
    </div>

    <div class="content-container">
        <div class="chord-card">
            <div class="song-info">
                <h1>{{ result.title if result else "Unknown Title" }}</h1>
                <p>{{ result.artist if result else "Unknown Artist" }}</p>
            </div>
            <pre id="chordSheet">{{ chords_text }}</pre>
        </div>
    </div>

    <script>
        let isScrolling = false;
        let scrollInterval = null;

        function toggleScroll() {
            const btn = document.getElementById('playBtn');
            if (!isScrolling) {
                isScrolling = true;
                btn.innerText = "⏸ Pause";
                btn.style.background = "#374151";
                startScroll();
            } else {
                isScrolling = false;
                btn.innerText = "▶ Play";
                btn.style.background = "#9333ea";
                stopScroll();
            }
        }

        function startScroll() {
            const speed = document.getElementById('scrollSpeed').value;
            scrollInterval = setInterval(() => { window.scrollBy(0, 1); }, 60 / speed);
        }

        function stopScroll() { clearInterval(scrollInterval); }

        document.getElementById('scrollSpeed').oninput = () => {
            if (isScrolling) { stopScroll(); startScroll(); }
        };
    </script>
    <script src="{{ url_for('static', filename='transpose.js') }}"></script>
</body>
</html>